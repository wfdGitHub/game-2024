<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>
      Pomelo
    </title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta http-equiv="content-style-type" content="text/css" />
    <meta http-equiv="content-scripte-type" content="text/javascript" />
    <meta name="author" content="netease" />
    <meta name="version" content="1.0" />
    <meta name="keywords" content="pomelo" />
    <link type="text/css" rel="stylesheet" href="css/base.css" />
    <script src="js/lib/build/build.js" type="text/javascript"></script>
    <script type="text/javascript">
      require('boot');
    </script> 
    <script type="text/javascript">
      var pomelo = window.pomelo;
      var host = "120.55.61.144";
      host = "127.0.0.1"
      var queryEntry = function(callback) {
        var route = 'gate.gateHandler.queryClientEntry';
        pomelo.init({
          host: host,
          port: "3910",
          log: true
        }, function(data) {
          console.log("!!!!!")
          console.log(data)
          pomelo.request(route, {}, function(data) {
            pomelo.disconnect();
            if(data.code === 500) {
              console.log(data)
              return;
            }
            callback(host, data.port);
          });
        });
      };
      function entry(unionid) {
        queryEntry(function(host,port) {
          pomelo.init({
            host: host,
            port: port,
            log: true
          },function() {
            pomelo.request("connector.entryHandler.entryAccount",{unionid : unionid}, function(data) {
                console.log(data);
            });
          });
        })
      }
      pomelo.on("close",function(reason) {
        console.log("close",reason)
      })
      pomelo.on("onMessage",function(data) {
        console.log("onMessage")
        console.log(data)
      })
      pomelo.on("onChat",function(data) {
        console.log("onChat")
        console.log(data)
      })
      //获取服务器列表
      var getAreaList = function(index) {
        pomelo.request("connector.loginHandler.getAreaList", {index : index}, function(data) {
            console.log(data);
        });
      }
      //选择服务器
      var chooseArea = function(areaId) {
        pomelo.request("connector.loginHandler.chooseArea", {areaId : areaId}, function(data) {
            console.log(data);
        });
      }
      //获取该服务器角色信息
      var getPlayerInfo = function(areaId) {
        pomelo.request("connector.loginHandler.getPlayerInfo", {areaId : areaId}, function(data) {
            console.log(data);
        });
      }
      //注册角色
      var register = function(areaId,name) {
        pomelo.request("connector.loginHandler.register", {areaId : areaId,name : name}, function(data) {
            console.log(data);
        });
      }
      //登录服务器
      var loginArea = function(areaId) {
        pomelo.request("connector.loginHandler.loginArea", {areaId : areaId}, function(data) {
            console.log(data);
        });
      }
      //获取所处服务器
      var getLocationAreaId = function() {
        pomelo.request("connector.loginHandler.getLocationAreaId", {}, function(data) {
            console.log(data);
        });
      }
      //加入聊天室
      var joinChatRoom = function(roomName) {
        pomelo.request("chat.chatHandler.joinChatRoom",{roomName : roomName}, function(data) {
            console.log(data);
        });
      }
      //离开聊天室
      var leaveChatRoom = function(roomName) {
        pomelo.request("chat.chatHandler.leaveChatRoom",{roomName : roomName}, function(data) {
            console.log(data);
        });
      }
      //发送聊天消息
      var say = function(roomName,text) {
        pomelo.notify("chat.chatHandler.say",{roomName : roomName,text : text}, function(data) {
            console.log(data);
        });
      }
      //激活管理员模式
      var activatePrivileges = function() {
        pomelo.request("admin.adminHandler.activatePrivileges", {}, function(data) {
            console.log(data);
        });
      }
      //发放物品
      var sendItem = function(target,itemId,value) {
        pomelo.request("area.adminArea.sendItem", {target : target,itemId : itemId,value : value}, function(data) {
            console.log(data);
        })
      }
      var openArea = function() {
        pomelo.request("admin.adminHandler.openArea", {}, function(data) {
            console.log(data);
        });
      }
      //获取服务器信息
      var getAreaServerInfos = function() {
        pomelo.request("admin.adminHandler.getAreaServerInfos", {}, function(data) {
            console.log(data);
        });
      }
      //获取服务器成员
      var getAreaPlayers = function(areaId) {
        pomelo.request("admin.adminHandler.getAreaPlayers", {areaId : areaId}, function(data) {
            console.log(data);
        });
      }
      getAreaPlayers
      //获取聊天室列表
      var getChatRooms = function() {
        pomelo.request("chat.adminChat.getChatRooms", {}, function(data) {
            console.log(data);
        });
      }
      //获取聊天室成员
      var getMembers = function(roomName) {
        pomelo.request("chat.adminChat.getMembers", {roomName : roomName}, function(data) {
            console.log(data);
        });
      }
      var challengeCheckpoints = function(seededNum,readList) {
        pomelo.request("area.fightHandler.challengeCheckpoints",{seededNum : seededNum,readList : readList}, function(data) {
            console.log(data);
        })
      }
      var getCheckpointsInfo = function() {
        pomelo.request("area.fightHandler.getCheckpointsInfo",{}, function(data) {
            console.log(data);
        })
      }
      //otps包含  itemId   value 及使用物品其他参数   如经验丹需characterId
      var useItem = function(otps) {
        pomelo.request("area.normalHandler.useItem",otps, function(data) {
            console.log(data);
        })
      }
      //增加背包物品  测试功能
      var addItem = function(itemId,value) {
        pomelo.request("area.normalHandler.addItem",{itemId : itemId,value : value}, function(data) {
            console.log(data);
        })
      }
      //获取在线挂机奖励
      var getOnhookAward = function() {
        pomelo.request("area.normalHandler.getOnhookAward",{}, function(data) {
            console.log(data);
        })
      }
      var test = function(items) {
        pomelo.request("area.normalHandler.test",{items : items}, function(data) {
            console.log(data);
        })
      }
      //角色进阶
      var advanced = function(characterId) {
        pomelo.request("area.normalHandler.advanced",{characterId : characterId}, function(data) {
            console.log(data);
        })
      }
      //角色转生
      var characterSamsara = function(characterId) {
        pomelo.request("area.normalHandler.characterSamsara",{characterId : characterId}, function(data) {
            console.log(data);
        })
      }
    </script>
  </head>
  <body>
    <div class="g-doc">
      <div class="g-banner" style="border:none">
        <div class="logo">
          <div class="img"></div>
        </div>
      </div>
      <div class="g-background">
        <div class="g-content">
          Welcome to Pomelo
        </div>
      </div>
      <div class="g-link">
        Home:
        <a href="https://github.com/NetEase/pomelo">https://github.com/NetEase/pomelo</a>
      </div>
      <div class="g-button">
        <input id="test" type="button" value="Test Game Server" onclick="show()"/>
      </div>
    </div>
  </body>
</html>
